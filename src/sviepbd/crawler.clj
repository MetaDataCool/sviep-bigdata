(ns sviepbd.crawler
  (:import [java.text NumberFormat] 
           [java.util Locale] 
           [org.jsoup Jsoup]
           [org.jsoup.nodes Element Document]
           [org.jsoup.select Elements]
           )
  (:require [org.httpkit.client :as http]
            [clojure.string :as s]
            )
  (:use clojure.repl clojure.pprint))

;; --------------------------------
;; DOM querying
;; --------------------------------
(defn select [^Element element query]
  (-> element (.select query) seq))
(def ^Element select-one (comp first select))

(defn ^Element ancestor-with-tag "Finds the closest ancestor of an element that has the given tag" 
  [tag,^Element e]
  (->> (.parents e) seq (filter (fn [^Element p] (= (.. p tag getName) tag))) first))
()
(def td-ancestor (partial ancestor-with-tag "td"))

(defn ^Element next-sibling [^Element e] ())

(defn ^String own-text [^Element element] (.ownText element))
(defn ^String text [^Element element] (.text element))

(defn ^Element find-having-text [^Element root,query,txt]
  (->> (select root query) (filter #(= (text %) txt)) first))
;; --------------------------------
;; Numbers & fields parsing
;; --------------------------------
(defn find-number "Finds the number part of a string." 
  [s] (re-find #"[\d\.,]+" s))
(def parse-number
  (let [ni (.. NumberFormat (getNumberInstance Locale/US))]
    (fn [num-s] (.parse ni num-s))))

(defn read-percentage [^Element e] (-> e text find-number parse-number (/ 100.0))) ;; divide by 100.0 to get a decimal between 0 and 1
(defn read-numerical [^Element e] (-> e text find-number parse-number))
(defn read-dollars [^Element e] (-> e text find-number parse-number (* 100))) ;; times 100 to have an integer
(defn read-checkbox [^Element e] 
  (-> (select-one e "img") (.attr "src")
    (case
      "_gfx_/icons/checkboxX.gif" false
      "_gfx_/icons/checkboxOptOut.png" false
      "_gfx_/icons/checked.gif" true
      false)
    ))


;; --------------------------------
;; Crawling org page
;; --------------------------------

(defn read-table-fields [fields-opts td>a-elems]
  (->> td>a-elems
    (filter #(fields-opts (text %)))
    (map (fn [^Element e]
           (let [t (-> e text fields-opts)]
             {:field-name (t :field-name)
              :field-value ((t :read-value) (-> e td-ancestor .nextElementSibling))})))
    ))

(def regular-fields-opts "fields to look up in the tables, with the corresponding quantity type"
  {;; Financial Performance Metrics
   "Program Expenses" {:field-name "program_expenses",:read-value read-percentage}
   "Administrative Expenses" {:field-name "administrative_expenses",:read-value read-percentage}
   "Fundraising Expenses" {:field-name "fundraising_expenses",:read-value read-percentage}
   "Fundraising Efficiency" {:field-name "fundraising_efficiency",:read-value read-dollars}
   "Primary Revenue Growth" {:field-name "primary_revenue_growth",:read-value read-percentage}
   "Program Expenses Growth" {:field-name "program_expenses_growth",:read-value read-percentage}
   "Working Capital Ratio" {:field-name "working_capital_ratio",:read-value read-percentage}
   
   ;; Accountability & Transparency Performance Metrics
   "Independent Voting Board Members" {:field-name "independent_voting_board_members",:read-value read-checkbox}
   "No Material diversion of assets" {:field-name "no_material_diversion_of_assets",:read-value read-checkbox}
   "Audited financials prepared by independent accountant" {:field-name "audited_financials_prepared_by_independent_accountant",:read-value read-checkbox}
   "Does Not Provide Loan(s) to or Receive Loan(s) From related parties" {:field-name "does_not_provide_loans_to_or_receive_loans_from_related_parties",:read-value read-checkbox}
   "Documents Board Meeting Minutes" {:field-name "documents_board_meeting_minutes",:read-value read-checkbox}
   "Provided copy of Form 990 to organization's governing body in advance of filing" {:field-name "provided_copy_of_form_990_to_organization's_governing_body_in_advance_of_filing",:read-value read-checkbox}
   "Conflict of Interest Policy" {:field-name "conflict_of_interest_policy",:read-value read-checkbox}
   "Whistleblower Policy" {:field-name "whistleblower_policy",:read-value read-checkbox}
   "Records Retention and Destruction Policy" {:field-name "records_retention_and_destruction_policy",:read-value read-checkbox}
   "CEO listed with salary" {:field-name "ceo_listed_with_salary",:read-value read-checkbox}
   "Process for determining CEO compensation" {:field-name "process_for_determining_ceo_compensation",:read-value read-checkbox}
   "Board Listed / Board Members Not Compensated" {:field-name "board_listed_board_members_not_compensated",:read-value read-checkbox}
   
   "Donor Privacy Policy" {:field-name "donor_privacy_policy",:read-value read-checkbox}
   "Board Members Listed" {:field-name "board_members_listed",:read-value read-checkbox}
   "Audited Financials" {:field-name "audited_financials",:read-value read-checkbox}
   "Form 990" {:field-name "form_990",:read-value read-checkbox}
   "Key staff listed" {:field-name "key_staff_listed",:read-value read-checkbox}
   })

(def income-statement-fields-opts 
  {;; REVENUE
   "TOTAL REVENUE" {:field-name "is_total_revenue",:read-value read-dollars}
   
   ;; EXPENSES
   "Program Expenses" {:field-name "is_program_expenses",:read-value read-dollars}
   "Administrative Expenses" {:field-name "is_administrative_expenses",:read-value read-dollars}
   "Fundraising Expenses" {:field-name "is_fundraising_expenses",:read-value read-dollars}
   "TOTAL FUNCTIONAL EXPENSES" {:field-name "is_total_functional_expenses",:read-value read-dollars}
   
   "Payments to Affiliates" {:field-name "is_payments_to_affiliates",:read-value read-dollars}
   "Excess (or Deficit) for the year" {:field-name "is_excess_or_deficit",:read-value read-dollars}
   
   "Net Assets" {:field-name "is_net_assets",:read-value read-dollars}
   })

(comment 
  (def cn-html ;; example non-profit page HTML on CharityNavigator 
    "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\r\n\r\n<html xmlns=\"http://www.w3.org/1999/xhtml\" \r\n\t  xmlns:og=\"http://opengraphprotocol.org/schema/\" \r\n      xmlns:fb=\"http://www.facebook.com/2008/fbml\">\r\n      \r\n<head><script type=\"text/javascript\">/* <![CDATA[ */_cf_loadingtexthtml=\"<img alt=' ' src='/cf-scripts/ajax/resources/cf/images/loading.gif'/>\";\n_cf_contextpath=\"\";\n_cf_ajaxscriptsrc=\"/cf-scripts/ajax\";\n_cf_jsonprefix='//';\n_cf_clientid='7BC91F1ABD51482E97A629341134EDE6';/* ]]> */</script><script type=\"text/javascript\" src=\"/cf-scripts/ajax/messages/cfmessage.js\"></script>\n<script type=\"text/javascript\" src=\"/cf-scripts/ajax/package/cfajax.js\"></script>\n<script type=\"text/javascript\" src=\"/cf-scripts/cfform.js\"></script>\n<script type=\"text/javascript\" src=\"/cf-scripts/masks.js\"></script>\n<script type=\"text/javascript\" src=\"/cf-scripts/cfformhistory.js\"></script>\n<script type=\"text/javascript\" src=\"/cf-scripts/ajax/yui/yahoo-dom-event/yahoo-dom-event.js\"></script>\n<script type=\"text/javascript\" src=\"/cf-scripts/ajax/yui/animation/animation-min.js\"></script>\n<script type=\"text/javascript\" src=\"/cf-scripts/ajax/ext/adapter/yui/ext-yui-adapter.js\"></script>\n<script type=\"text/javascript\" src=\"/cf-scripts/ajax/ext/ext-all.js\"></script>\n<script type=\"text/javascript\" src=\"/cf-scripts/ajax/package/cfwindow.js\"></script>\n<link rel=\"stylesheet\" type=\"text/css\" href=\"/cf-scripts/ajax/resources/ext/css/ext-all.css\" />\n<link rel=\"stylesheet\" type=\"text/css\" href=\"/cf-scripts/ajax/resources/cf/cf.css\" />\n  \r\n<base href=\"http://www.charitynavigator.org/\" />\r\n<meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\" />\r\n<title>Charity Navigator Rating - Wings of Hope</title>\r\n<meta name=\"MSSmartTagsPreventParsing\" content=\"TRUE\" />\r\n<meta name=\"keywords\" content=\"best charity,best charities,charitable contribution,charitable donation,charitable donations,charitable giving,charities,charity,charity directory,charity rating,charity ratings,charity watchdog,donate money,donating funds,donations,donors,giving money,guide,non profit,nonprofit,non-profit,organization,philanthropic,philanthropy,ratings,tax deduction,tithing,wise giving\" />\r\n<meta name=\"description\" content=\"Wings of Hope is a International charity rated 4 of 4 stars by Charity Navigator. Located in St. Louis, MO, it is one of 7,980 organizations rated by Charity Navigator.\" />\r\n<meta property=\"fb:page_id\" content=\"72994058780\" />\r\n<meta property=\"fb:app_id\" content=\"455191431231125\"/>\r\n\r\n\t<meta property=\"og:title\" content=\"Charity Navigator Rating - Wings of Hope\"/>\r\n    <meta property=\"og:type\" content=\"non_profit\"/>\r\n    <meta property=\"og:url\" content=\"http://www.charitynavigator.org/index.cfm?bay=search.summary&orgid=9524\"/>\r\n    <meta property=\"og:image\" content=\"http://www.charitynavigator.org/_gfx_/promo/printable/jpegs/general_square.jpg\"/>\r\n    <meta property=\"og:site_name\" content=\"Charity Navigator\"/>\r\n    <meta property=\"og:description\" content=\"Wings of Hope is a International charity rated 4 of 4 stars by Charity Navigator. Located in St. Louis, MO, it is one of 7,980 organizations rated by Charity Navigator.\"/>\r\n\r\n<link rel=\"stylesheet\" href=\"http://www.charitynavigator.org/_css_/style.css?v=16\" type=\"text/css\" />\r\n<link rel=\"stylesheet\" href=\"http://www.charitynavigator.org/_css_/navbar.css\" type=\"text/css\" />\r\n<link rel=\"shortcut icon\" href=\"http://www.charitynavigator.org/favicon.ico\" type=\"image/x-icon\" />\r\n\r\n\r\n<script src=\"//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js\"></script>\r\n<link rel=\"stylesheet\" href=\"//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.css\" />\r\n<script src=\"//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js\"></script>\r\n<script src=\"//code.jquery.com/jquery-migrate-1.2.1.min.js\"></script>\r\n\r\n\r\n\r\n\r\n\r\n\r\n<script src=\"http://www.charitynavigator.org/_js_/utility.js?v=2\" type=\"text/javascript\"></script>\r\n\r\n<script language=\"JavaScript\" type=\"text/javascript\">\r\n\twindow.onunload = function(){};\r\n</script>\r\n\r\n<script type=\"text/javascript\">\r\n<!--\r\nvar form_submitted = false;\r\n\r\nfunction submit_form ( )\r\n{\r\n  if ( form_submitted )\r\n  {\r\n    alert ( \"Your form has already been submitted. Please wait a moment for the search to complete. \\nIf the page does not load please refresh this page.\" );\r\n    return false;\r\n  }\r\n  else\r\n  {\r\n    form_submitted = true;\r\n    return true;\r\n  }\r\n}\r\n// -->\r\n</script>\r\n<script type=\"text/javascript\">\r\n\r\n  var _gaq = _gaq || [];\r\n  _gaq.push(['_setAccount', 'UA-560507-1']);\r\n  _gaq.push(['_trackPageview']);\r\n\r\n  (function() {\r\n    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;\r\n\tga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';\r\n\t\t\r\n    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);\r\n  })();\r\n\r\n</script>\r\n\r\n\r\n<script type=\"text/javascript\">\r\nfunction trackOutboundLink(link, category, action) { \r\n \r\ntry { \r\n_gaq.push(['_trackEvent', category , action]); \r\n} catch(err){}\r\n \r\nsetTimeout(function() {\r\ndocument.location.href = link.href;\r\n}, 100);\r\n}\r\n</script>\r\n<script type='text/javascript'>\r\nvar googletag = googletag || {};\r\ngoogletag.cmd = googletag.cmd || [];\r\n(function() {\r\nvar gads = document.createElement('script');\r\ngads.async = true;\r\ngads.type = 'text/javascript';\r\nvar useSSL = 'https:' == document.location.protocol;\r\ngads.src = (useSSL ? 'https:' : 'http:') + \r\n'//www.googletagservices.com/tag/js/gpt.js';\r\nvar node = document.getElementsByTagName('script')[0];\r\nnode.parentNode.insertBefore(gads, node);\r\n})();\r\n</script>\r\n\r\n<script type='text/javascript'>\r\ngoogletag.cmd.push(function() {\r\nvar slot1=googletag.defineSlot('/1364794/CN_Full_Banner_Pop_Ups', [468, 60], 'div-gpt-ad-1364025014670-0').addService(googletag.pubads());slot1.set(\"adsense_channel_ids\",\"1106005737\");\r\nvar slot2=googletag.defineSlot('/1364794/CN_Leaderboard_Top', [728, 90], 'div-gpt-ad-1364025014670-1').addService(googletag.pubads());slot2.set(\"adsense_channel_ids\",\"2582738938\");\r\nvar slot3=googletag.defineSlot('/1364794/CN_Med.Rec_Home', [300, 250], 'div-gpt-ad-1364025014670-2').addService(googletag.pubads());slot3.set(\"adsense_channel_ids\",\"4059472139\");\r\nvar slot4=googletag.defineSlot('/1364794/CN_Wide_Skyscraper_Sidebar', [160, 600], 'div-gpt-ad-1364025014670-3').addService(googletag.pubads());slot4.set(\"adsense_channel_ids\",\"5536205336\");\r\ngoogletag.pubads().enableSingleRequest();\r\ngoogletag.enableServices();\r\n});\r\n</script> <!--/*Google Feedback Form*/-->\r\n<script async=\"\" defer=\"\" src=\"//survey.g.doubleclick.net/async_survey?site=lbfxsfm3jubtw\"></script> \r\n\r\n\r\n\t<script type=\"text/javascript\" src=\"//www.google.com/jsapi\"></script>\r\n    <script type=\"text/javascript\">\r\n      google.load('visualization', '1', {packages: ['corechart']});\r\n    </script>\r\n    \r\n    \n<script type=\"text/javascript\">/* <![CDATA[ */\n\tColdFusion.Ajax.importTag('CFAJAXPROXY');\n/* ]]> */</script>\n\n<script type=\"text/javascript\">/* <![CDATA[ */\n\tColdFusion.Ajax.importTag('CFFORM');\n/* ]]> */</script>\n\n<script type=\"text/javascript\">/* <![CDATA[ */\n\tColdFusion.Ajax.importTag('CFWINDOW');\n/* ]]> */</script>\n\n<script type=\"text/javascript\">/* <![CDATA[ */\n\tvar _cf_window_init_1415406200119=function()\n\t{\n\t\t_cf_bind_init_1415406200120=function()\n\t\t{\n\t\t\tColdFusion.Bind.register([],{'bindTo':'window430909606_body','bindExpr':['http://www.charitynavigator.org/my/charities/addchar.cfm?EIN=430909606&qstring=bay%3Dsearch%2Esummary%26orgid%3D9524']},ColdFusion.Bind.urlBindHandler,false);\n\t\t};ColdFusion.Event.registerOnLoad(_cf_bind_init_1415406200120);var _cf_window=ColdFusion.Window.create('window430909606','','http://www.charitynavigator.org/my/charities/addchar.cfm?EIN=430909606&qstring=bay%3Dsearch%2Esummary%26orgid%3D9524',{ modal:true, closable:true, divid:'cf_window1415406200118', draggable:false, resizable:false, fixedcenter:true, width:300, height:300, shadow:true, bodystyle:'background-color:white;', callfromtag:true, initshow:false, destroyonclose:false, _cf_refreshOnShow:true});\n\t};ColdFusion.Event.registerOnLoad(_cf_window_init_1415406200119);\n/* ]]> */</script>\n\r\n    <script type=\"text/javascript\">\r\n      function drawVisualization3() {\r\n        // Create and populate the data table.\r\n        var data = google.visualization.arrayToDataTable([\r\n          ['Source', 'Dollars'],\r\n          ['Contributions, Gifts & Grants', 4587877.0000],\r\n          ['Federated Campaigns', 0.0000],\r\n          ['Membership Dues', 0.0000],\r\n\t\t  ['Fundraising Events', 0.0000],\r\n\t\t  ['Related Organizations', 0.0000],\r\n\t\t  ['Government Grants', 0.0000]\r\n        ]);\r\n      \r\n\t  \t  \tvar formatter = new google.visualization.NumberFormat({prefix: '$',fractionDigits: 0});\r\n  formatter.format(data, 1); // Apply formatter to second column\r\n\t  \r\n        // Create and draw the visualization.\r\n        new google.visualization.PieChart(document.getElementById('chart_revenue')).\r\n            draw(data, {title:\"Contributions Breakdown\",chartArea:{left:40,top:60,width:\"95%\",height:\"95%\"},titleTextStyle:{fontSize: 14},fontName: '\"Arial\"'});\r\n      \r\n\t  }\r\n      \r\n      google.setOnLoadCallback(drawVisualization3);\r\n    </script>\r\n    \r\n\r\n    <script type=\"text/javascript\">\r\n      function drawVisualization() {\r\n        // Create and populate the data table.\r\n        var data = google.visualization.arrayToDataTable([\r\n          ['Expense', 'Dollars'],\r\n          ['Program', 3840508.0000],\r\n          ['Administrative', 250274.0000],\r\n          ['Fundraising', 48209.0000]\r\n        ]);\r\n      \r\n\t  \tvar formatter = new google.visualization.NumberFormat({prefix: '$',fractionDigits: 0});\r\n  formatter.format(data, 1); // Apply formatter to second column\r\n\t\t\t  \r\n        // Create and draw the visualization.\r\n        new google.visualization.PieChart(document.getElementById('chart_efficiency')).\r\n            draw(data, {title:\"Expenses Breakdown\",chartArea:{left:40,top:60,width:\"95%\",height:\"95%\"},titleTextStyle:{fontSize: 14},fontName: '\"Arial\"'});\r\n      \r\n\t  }\r\n      \r\n      google.setOnLoadCallback(drawVisualization);\r\n    </script>\r\n     \r\n    <script type=\"text/javascript\">\r\n      function drawVisualization2() {\r\n        // Create and populate the data table.\r\n        var data = google.visualization.arrayToDataTable([\r\n          ['Year', 'Primary Revenue', 'Program Expenses'],\r\n        ['2009',  2207851.0000,   1492909.0000], ['2010',  4368331.0000,   2199326.0000], ['2011',  7751144.0000,   1952303.0000], ['2012',  4587877.0000,   3840508.0000] \r\n        ]);\r\n      \r\n\t\t  \tvar formatter = new google.visualization.NumberFormat({prefix: '$',fractionDigits: 0});\r\n  formatter.format(data, 1); // Apply formatter to second column\r\n\t formatter.format(data, 2); // Apply formatter to third column\r\n\t\r\n        // Create and draw the visualization.\r\n        new google.visualization.ColumnChart(document.getElementById('chart_capacity')).\r\n            draw(data,\r\n                 {title:\"Revenue/Expenses Trend\",\r\n                  chartArea:{left:40,top:80,width:\"90%\",height:\"70%\"}, \r\n                  vAxis: {minValue: 0,textPosition:'none'},titleTextStyle:{fontSize: 14},fontName: '\"Arial\"'\r\n\t\t\t\t , legend: {position: 'top',alignment: 'end'}\r\n\t\t\t\t  }\r\n            );\r\n      }\r\n      \r\n\r\n      google.setOnLoadCallback(drawVisualization2);\r\n    </script>\r\n</head>\r\n\r\n<body  onload=\"visibilitytoggle();\">\r\n\r\n<!-- ClickTale Top part -->\r\n<script type=\"text/javascript\">\r\nvar WRInitTime=(new Date()).getTime();\r\n</script>\r\n<!-- ClickTale end of Top part --> <div id=\"fb-root\"></div>\r\n<script>(function(d, s, id) {\r\n  var js, fjs = d.getElementsByTagName(s)[0];\r\n  if (d.getElementById(id)) return;\r\n  js = d.createElement(s); js.id = id;\r\n  js.src = \"//connect.facebook.net/en_US/all.js#xfbml=1\";\r\n  fjs.parentNode.insertBefore(js, fjs);\r\n}(document, 'script', 'facebook-jssdk'));</script> \r\n<div id=\"wrapper\">\r\n<div id=\"wrapper2\">\r\n<div id=\"top\"><a href=\"/\"><img src=\"http://www.charitynavigator.org/_gfx_/main/CN_Logo_Main373x112.png\" alt=\"Charity Navigator\" width=\"373\" height=\"112\" border=\"0\" /></a>\r\n\r\n\r\n\r\n<div id=\"topuser\">\r\n \r\n    <a href=\"https://www.charitynavigator.org/index.cfm?bay=my.login\"><strong>Sign\r\n    in</strong></a>  | New\r\n    User? <a href=\"https://www.charitynavigator.org/index.cfm?bay=my.login\"><strong>Register\r\n    now to access expanded features.</strong></a>  |  &nbsp;<a href=\"index.cfm?bay=content.view&amp;cpid=485\">FAQ</a>\r\n  \r\n  \r\n</div> <a href=\"index.cfm?bay=my.login\"><img class=\"btnSubscribeToCN\" src=\"http://www.charitynavigator.org/_gfx_/buttons/newsletter_subscribe.jpg\" alt=\"Subscribe\" height=\"44\" width=\"203\" /></a>\r\n<a href=\"index.cfm?bay=content.support\"><img class=\"btnDonateToCN\" src=\"http://www.charitynavigator.org/_gfx_/buttons/donate_to_cn.jpg\" alt=\"Donate to Charity Navigator\" height=\"44\" width=\"150\" /></a>\r\n  \r\n</div>\r\n\r\n\r\n\r\n<div id=\"navback\">\r\n\t<div id=\"nav\">\r\n\t\t<ul id=\"navx\" class=\"drop\">\r\n\t\t\t<li><a href=\"/\">Home</a></li>\r\n\t<li><a href=\"https://www.charitynavigator.org/index.cfm?bay=my.login\">My Charities</a></li>\r\n\t\t\t<li><a href=\"index.cfm?bay=topten\">Top Ten Lists</a>\r\n                                       \r\n\t    </li>                        \r\n\t\t\t<li><a href=\"index.cfm?bay=content.view&cpid=489\">Hot Topics</a>\r\n\t\t\t\t\r\n\t\t\t</li>\r\n\t\t\t<li><a href=\"index.cfm?bay=content.view&amp;cpid=32\">Methodology</a>\r\n\t\t\t\t\r\n\t    </li>\r\n\t\t\t<li class=\"end\"><a href=\"/index.cfm?bay=content.view&amp;cpid=419\">Tips for Donors\r\n\t\t\t\t</a>\r\n\t\t\t                        \r\n\t\t\t</li>\r\n\t\t</ul>\r\n\t</div>\r\n</div>\r\n\r\n<div id=\"search\">\r\n\r\n\r\n<form id=\"simplesearch\" name=\"simplesearch\" method=\"get\" action=\"index.cfm\"  onsubmit=\"return submit_form()\">\r\n  <img align=\"absmiddle\" src=\"http://www.charitynavigator.org/_gfx_/main/charity_search3.gif\" alt=\"Charity Search\" width=\"137\" height=\"17\" />&nbsp;\r\n  <span><input name=\"keyword_list\" type=\"text\" class=\"searchbox\" id=\"keyword_list\" placeholder=\"enter charity name or keywords\"  value=\"\" maxlength=\"75\" />\r\n  <input class=\"checkBox\" name=\"nameonly\" type=\"checkbox\" id=\"nameonly\" value=\"1\" style=\"vertical-align:middle;\" />\r\n<span class=\"gray\">Name Only</span>\r\n<input name=\"Submit2\" type=\"submit\" class=\"btnSrchSubmit\" id=\"btnSrchSubmit\" value=\"Search\" onclick=\"KeyWordsCheck('simplesearch')\" />\r\n  &nbsp;|&nbsp; <a href=\"index.cfm?bay=search.advanced\">Advanced</a>&nbsp;  |&nbsp; <a href=\"index.cfm?bay=search.alpha\">A-Z\r\n  Directory&nbsp;</a> |&nbsp; <a href=\"index.cfm?bay=search.results&amp;overallrtg=4\">4-Star\r\n  Charities</a>\r\n  \r\n  <input name=\"bay\" type=\"hidden\" id=\"bay\" value=\"search.results\" />\r\n</form> \r\n\r\n</div>\r\n<div id=\"bodywrap\">\r\n\r\n<div id=\"cn_body\"> \r\n<div style=\"float:right; padding:30px 5px 5px 5px; text-align:center; width: 100px;\"><a href=\"javascript:openBrWindow('http://www.charitynavigator.org/_shared_/disclaimer.cfm','glossary','scrollbars=yes,width=400,height=300')\" onmouseover=\"self.status='Why ads?';return true;\" onmouseout=\"self.status='';return true;\">Why are these <br />\r\nads here?</a></div>\r\n<div id=\"leaderboard\" style=\"padding:5px;\">\r\n    <div id='div-gpt-ad-1364025014670-1' style='width:728px; height:90px; margin:auto;'>\r\n      <script type='text/javascript'>\r\n    googletag.cmd.push(function() { googletag.display('div-gpt-ad-1364025014670-1'); });\r\n    </script>\r\n    </div>\r\n</div>\r\n\r\n\r\n<div id=\"cn_body_inner\"> \r\n\r\n\r\n \r\n\r\n<div id=\"leftcontent\">\r\n\r\n\r\n<div id=\"leftnav\">\r\n   <h1>Charity Rating</h1>\r\n</div>  \r\n<div id=\"leftnavcontent\"> \r\n   <div class=\"rating\">\r\n     \r\n\r\n\t\t    <p><strong>Wings of Hope</strong><br />\r\n\t\t\r\n\t\t\t18370 Wings of Hope Boulevard<br />\r\n\t\t\tSt. Louis,&nbsp;MO&nbsp;63005<br />\r\n\t\t\ttel: (800) 448-9487<br /> \r\n            <a href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;word=EIN%20%28Employer%20Identification%20Number%29&amp;print=1','glossary','scrollbars=yes,width=625,height=300')\" class=\"\" onmouseover=\"self.status='See Definition of [Ein (Employer Identification Number)]';return true;\" onmouseout=\"self.status='';return true;\">EIN</a>: 43-0909606\r\n\t\t\t</p>\r\n\r\n\t\r\n\r\n\t<p><a href=\"JavaScript: if(confirm('You must be a registered user (FREE) and logged in view the email address.\\n\\rPress OK in order to be sent to our login and registration \tpage.')){location.href='https://www.charitynavigator.org/index.cfm?bay=my.login&returnurl=http%3A%2F%2Fwww%2Echaritynavigator%2Eorg%2Findex%2Ecfm%3Fbay%3Dsearch%2Ehistory%2526orgid%3D9524';}\">Contact Email</a><br /> <a href=\"http://www.wings-of-hope.org/\" target=\"_blank\" onClick=\"_gaq.push(['_trackEvent', 'Outbound', 'OrgSite', '9524']);\">Visit Web Site</a></p>\r\n\r\n\r\n   </div> \r\n<div>\r\n\r\n</div>\r\n<div>\r\n\r\n    <h1>Board Leadership</h1> \r\n<p>\r\n  <strong>Larry Lemke</strong><br />Chairman of the Board                             </p>\r\n\r\n<h1>CEO</h1>\r\n<p><strong>Douglas Clements</strong><br />\r\nPresident</p>\r\n\r\n<br />\r\n\r\n<h1>Give From Your Donor Advised Fund</h1>\r\n  <iframe frameborder=\"0\" width=\"190\" height=\"250\" src=\"/search/fidelity.cfm?orgid=9524\" scrolling=\"auto\" style=\"margin:0px; padding:0px; border: 0;\"></iframe>\r\n\r\n\r\n\r\n\t\r\n</div>\r\n</div>\r\n\r\n\r\n\r\n\r\n\r\n</div>\r\n\r\n<div id=\"maincontent\">\r\n<div id =\"maincontent2\">\r\n\r\n\r\n<p class=\"crumbs\">International : Development and Relief Services</p>     \r\n     \r\n       \r\n\t   \r\n<h1 class=\"charityname\">Wings of Hope</h1>\r\n<h2 class=\"tagline\">Changing the course of humanity towards peace and hope</h2> \r\n\r\n<div  id=\"cf_window1415406200118\" class=\"x-hidden\">\n\t\n\t<div  id=\"window430909606_title\" class=\"x-window-header\">\n\t\t&nbsp;\n\t </div>\n\t<div  id=\"window430909606_body\" class=\"x-window-body\" style=\"background-color:white;\">\n\t\t\n\t\t\n\t </div>\n </div> \r\n<!-- AddThis Button BEGIN -->\r\n<div class=\"addthis_toolbox addthis_default_style addthis_32x32_style\">&nbsp;\r\n\r\n<a href=\"javascript: ColdFusion.Window.show('window430909606');\"><span class=\"shareBtn\">Add to My Charities</span></a>\r\n\r\n<a href=\"https://www.networkforgood.org/donate/MakeDonation2.aspx?orgid2=430909606&amp;source=CN&amp;CMPGN=CRPG\" target=\"_blank\" onClick=\"_gaq.push(['_trackEvent', 'Outbound', 'DonateNow', '430909606']);\"><span class=\"greenBack shareBtn\">Donate</span></a>\r\n\r\n<a href=\"http://www.charitynavigator.org/index.cfm?bay=search.summary&orgid=9524&print=1\"><span class=\"grayBack shareBtn\">Print</span></a>\r\n<span class=\"share\">Share</span>\r\n<a class=\"addthis_button_facebook\"></a>\r\n<a class=\"addthis_button_twitter\"></a>\r\n<a class=\"addthis_button_linkedin\"></a>\r\n<a class=\"addthis_button_compact\"></a>\r\n\r\n</div>\r\n\r\n<script type=\"text/javascript\">var addthis_config = {\"data_track_addressbar\":true};</script>\r\n\r\n<script type=\"text/javascript\" src=\"//s7.addthis.com/js/300/addthis_widget.js#pubid=charitynav\"></script>\r\n<!-- AddThis Button END -->\r\n\r\n\r\n\r\n\r\n  \r\n                  \r\n    <div id=\"summary\">\r\n      \r\n <div class=\"tabs\">\r\n    <ul>\r\n      <li><a href=\"http://www.charitynavigator.org/index.cfm?bay=search.summary&orgid=9524\"  class=\"current\">Current Rating</a></li>\r\n\t\r\n    \r\n      <li><a href=\"JavaScript: if(confirm('You must be a registered user (FREE) and logged in to use this feature.\\n\\rPress OK in order to be sent to our login and registration page.')){location.href='https://www.charitynavigator.org/index.cfm?bay=my.login&returnurl=http%3A%2F%2Fwww%2Echaritynavigator%2Eorg%2Findex%2Ecfm%3Fbay%3Dsearch%2Ehistory%2526orgid%3D9524';}\" >History</a></li>\r\n\t<li><a href=\"index.cfm?bay=search.irs&amp;ein=430909606\" >IRS</a></li>\r\n       <li><a href=\"index.cfm?bay=search.comments&amp;orgid=9524\" >Comments</a></li>\r\n      \r\n\r\n    </ul>\r\n  </div>\r\n\r\n      <div class=\"summarywrap\">\r\n\t\t\r\n        \r\n\t\t  <div class=\"summaryBox\">\r\n                  \r\n<div class=\"rating\">\r\n  <table width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"2\">\r\n              \r\n                 <tr>\r\n                   <td colspan=\"2\" valign=\"top\"><div class=\"shadedtable\">\r\n                     <table width=\"100%\" border=\"0\" cellspacing=\"1\" cellpadding=\"3\">\r\n                       <tr>\r\n                         <th>&nbsp;</th>\r\n                         <th class=\"centerme\">Score (out of 100)<br />\r\n                           <a href=\"http://blog.charitynavigator.org/2014/08/do-charity-scores-look-little-different.html\" title=\"We changed our scale from 70 points to 100 points. Click to learn more.\" target=\"_blank\">What's different?</a></th>\r\n                         <th class=\"centerme\">Rating<br />\r\n                         FYE 12/2012</th>\r\n                       </tr>\r\n                       <tr>\r\n                         <td style=\"font-size:20px;\"><strong>Overall</strong></td>\r\n                         <td align=\"center\">99.48</td>\r\n                             <td align=\"center\">\r\n                             <strong><img src=\"http://www.charitynavigator.org/_gfx_/icons/stars/4stars.png\" width=\"61\" height=\"15\" alt=\"4 stars\" title=\"4 stars\"  />\r\n    \t\t\t\t\t</strong></td>\r\n                           </tr>\r\n                       <tr>\r\n                         <td><strong>&nbsp;&nbsp;Financial</strong></td>\r\n                         <td align=\"center\">99.27</td>\r\n                         <td align=\"center\"><strong><img src=\"http://www.charitynavigator.org/_gfx_/icons/stars/4starsb.png\" width=\"31\" height=\"8\" alt=\"4 stars\" title=\"4 stars\" /></strong></td>\r\n                       </tr>\r\n                       <tr>\r\n                         <td class=\"bottom\"><strong>&nbsp;&nbsp;Accountability &amp; Transparency</strong></td>\r\n                         <td class=\"bottom\" align=\"center\">100.00</td>\r\n                         <td class=\"bottom\" align=\"center\"><strong><img src=\"http://www.charitynavigator.org/_gfx_/icons/stars/4starsb.png\" width=\"31\" height=\"8\" alt=\"4 stars\" title=\"4 stars\" /> </strong></td>\r\n                       </tr>\r\n                     </table></div>\r\n                   </td>\r\n                 </tr>\r\n              </table>\r\n            \r\n        <p align=\"center\">\r\n      <img src=\"_gfx_/charts/CharityGraphics2/82920.png?v=19\" alt=\"Overall Rating Chart\" width=\"500\" height=\"492\" /></p>     \r\n   \r\n    <p align=\"center\"><a href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=content.view&amp;cpid=1287&amp;print=1','glossary','scrollbars=yes,width=625,height=400')\">Learn more about how we calculate the overall score and rating.</a></p>\r\n    <div class=\"shadedtable\">\r\n<table width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"2\">\r\n                  \r\n                  <tr>\r\n                    <th colspan=\"3\"><strong>Financial Performance Metrics</strong></th>\r\n        </tr>\r\n                  <tr>\r\n                    <td>&nbsp;</td>\r\n                    <td><a class=\"glossary\" href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;word=Program%20Expenses&amp;mid=7&amp;cid=20&amp;print=1','glossary','scrollbars=yes,width=760,height=400')\" onmouseover=\"self.status='See Definition of [Program Expenses]';return true;\" onmouseout=\"self.status='';return true;\">Program Expenses</a><br />\r\n                    <em>(Percent of the charityâ€™s budget spent on the programs <br />\r\n                    and services it  delivers)</em></td>\r\n                    <td align=\"right\" valign=\"top\"> 92.7%</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>&nbsp;</td>\r\n                    <td><a class=\"glossary\" href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;word=Administrative%20Expenses&amp;mid=3&amp;cid=20&amp;print=1','glossary','scrollbars=yes,width=760,height=400')\" onmouseover=\"self.status='See Definition of [Administrative Expenses]';return true;\" onmouseout=\"self.status='';return true;\">Administrative Expenses</a></td>\r\n                    <td align=\"right\">  6.0%</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>&nbsp;</td>\r\n                    <td><a class=\"glossary\" href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;word=Fundraising%20Expenses&amp;mid=2&amp;cid=20&amp;print=1','glossary','scrollbars=yes,width=760,height=400')\" onmouseover=\"self.status='See Definition of [Fundraising Expenses]';return true;\" onmouseout=\"self.status='';return true;\">Fundraising Expenses</a></td>\r\n                    <td align=\"right\">  1.1%</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>&nbsp;</td>\r\n                    <td><a class=\"glossary\" href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;word=Fundraising%20Efficiency&amp;mid=1&amp;cid=20&amp;print=1','glossary','scrollbars=yes,width=760,height=400')\" onmouseover=\"self.status='See Definition of [Fundraising Efficiency]';return true;\" onmouseout=\"self.status='';return true;\">Fundraising Efficiency</a></td>\r\n                    <td align=\"right\">$0.01</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>&nbsp;</td>\r\n                    <td><a class=\"glossary\" href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;word=Primary%20Revenue%20Growth&amp;mid=5&amp;cid=20&amp;print=1','glossary','scrollbars=yes,width=760,height=400')\" onmouseover=\"self.status='See Definition of [Primary Revenue Growth]';return true;\" onmouseout=\"self.status='';return true;\">Primary Revenue Growth</a><em></em></td>\r\n                    <td align=\"right\"> 27.6%</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>&nbsp;</td>\r\n                    <td><a class=\"glossary\" href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;word=Program%20Expenses%20Growth&amp;mid=6&amp;cid=20&amp;print=1','glossary','scrollbars=yes,width=760,height=400')\" onmouseover=\"self.status='See Definition of [Program Expenses Growth]';return true;\" onmouseout=\"self.status='';return true;\">Program Expenses Growth</a><em></em></td>\r\n                    <td align=\"right\"> 37.0%</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td class=\"bottom\">&nbsp;</td>\r\n                    <td class=\"bottom\"><a class=\"glossary\" href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;word=Working%20Capital%20Ratio&amp;mid=4&amp;cid=20&amp;print=1','glossary','scrollbars=yes,width=760,height=400')\" onmouseover=\"self.status='See Definition of [Working Capital Ratio]';return true;\" onmouseout=\"self.status='';return true;\">Working Capital Ratio</a> (years) </td>\r\n                    <td class=\"bottom\" align=\"right\">4.01</td>\r\n                  </tr>\r\n                  \r\n      </table>\r\n    </div>\r\n           \r\n<p>&nbsp;</p>\r\n<div class=\"shadedtable\">\r\n  <table width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"2\">\r\n    \r\n    <tr>\r\n      <th colspan=\"3\" valign=\"top\"><strong>Accountability &amp; Transparency Performance Metrics</strong></th>\r\n      </tr>\r\n    <tr>\r\n      <td colspan=\"2\" valign=\"top\"><strong>Information Provided on the Form 990</strong></td>\r\n      <td width=\"40\" valign=\"top\">&nbsp;</td>\r\n      </tr>\r\n    <tr>\r\n      <td valign=\"top\">&nbsp;</td>\r\n      <td valign=\"top\"><a class=\"glossary\" href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;gid=50&amp;print=1','glossary','scrollbars=yes,width=760,height=400')\" onmouseover=\"self.status='See Definition';return true;\" onmouseout=\"self.status='';return true;\">Independent Voting Board Members</a></td>\r\n      <td align=\"right\" valign=\"top\"><img src=\"_gfx_/icons/checked.gif\" width=\"15\" height=\"21\" /></td>\r\n      </tr>\r\n    \r\n    <tr>\r\n      <td valign=\"top\">&nbsp;</td>\r\n      <td valign=\"top\"><a class=\"glossary\" href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;gid=56&amp;print=1','glossary','scrollbars=yes,width=760,height=400')\" onmouseover=\"self.status='See Definition';return true;\" onmouseout=\"self.status='';return true;\">No Material diversion of assets</a></td>\r\n      <td align=\"right\" valign=\"top\"><img src=\"_gfx_/icons/checked.gif\" width=\"15\" height=\"21\" /></td>\r\n      </tr>\r\n    \r\n    <tr>\r\n      <td valign=\"top\">&nbsp;</td>\r\n      <td valign=\"top\"><a class=\"glossary\" href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;gid=57&amp;print=1','glossary','scrollbars=yes,width=760,height=400')\" onmouseover=\"self.status='See Definition';return true;\" onmouseout=\"self.status='';return true;\">Audited financials  prepared by independent accountant</a></td>\r\n      <td align=\"right\" valign=\"top\"><img src=\"_gfx_/icons/checked.gif\" width=\"15\" height=\"21\" /></td>\r\n      </tr>\r\n    <tr>\r\n      <td valign=\"top\">&nbsp;</td>\r\n      <td valign=\"top\"><a class=\"glossary\" href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;gid=55&amp;print=1','glossary','scrollbars=yes,width=760,height=400')\" onmouseover=\"self.status='See Definition';return true;\" onmouseout=\"self.status='';return true;\">Does Not Provide Loan(s) to or Receive Loan(s) From related parties</a></td>\r\n      <td align=\"right\" valign=\"top\"><img src=\"_gfx_/icons/checked.gif\" width=\"15\" height=\"21\" /></td>\r\n      </tr>\r\n    <tr>\r\n      <td valign=\"top\">&nbsp;</td>\r\n      <td valign=\"top\"><a class=\"glossary\" href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;gid=51&amp;print=1','glossary','scrollbars=yes,width=760,height=400')\" onmouseover=\"self.status='See Definition';return true;\" onmouseout=\"self.status='';return true;\">Documents Board Meeting Minutes</a></td>\r\n      <td align=\"right\" valign=\"top\"><img src=\"_gfx_/icons/checked.gif\" width=\"15\" height=\"21\" /></td>\r\n      </tr>\r\n    <tr>\r\n      <td valign=\"top\">&nbsp;</td>\r\n      <td valign=\"top\"><a class=\"glossary\" href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;gid=52&amp;print=1','glossary','scrollbars=yes,width=760,height=400')\" onmouseover=\"self.status='See Definition';return true;\" onmouseout=\"self.status='';return true;\">Provided copy of Form 990  to organization's governing body in advance of filing</a></td>\r\n      <td align=\"right\" valign=\"top\"><img src=\"_gfx_/icons/checked.gif\" width=\"15\" height=\"21\" /></td>\r\n      </tr>\r\n    <tr>\r\n      <td valign=\"top\">&nbsp;</td>\r\n      <td valign=\"top\"><a class=\"glossary\" href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;gid=53&amp;print=1','glossary','scrollbars=yes,width=760,height=400')\" onmouseover=\"self.status='See Definition';return true;\" onmouseout=\"self.status='';return true;\">Conflict of Interest  Policy</a></td>\r\n      <td align=\"right\" valign=\"top\"><img src=\"_gfx_/icons/checked.gif\" width=\"15\" height=\"21\" /></td>\r\n      </tr>\r\n    <tr>\r\n      <td valign=\"top\">&nbsp;</td>\r\n      <td valign=\"top\"><a class=\"glossary\" href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;gid=54&amp;print=1','glossary','scrollbars=yes,width=760,height=400')\" onmouseover=\"self.status='See Definition';return true;\" onmouseout=\"self.status='';return true;\">Whistleblower Policy</a></td>\r\n      <td align=\"right\" valign=\"top\"><img src=\"_gfx_/icons/checked.gif\" width=\"15\" height=\"21\" /></td>\r\n      </tr>\r\n    <tr>\r\n      <td valign=\"top\">&nbsp;</td>\r\n      <td valign=\"top\"><a class=\"glossary\" href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;gid=58&amp;print=1','glossary','scrollbars=yes,width=760,height=400')\" onmouseover=\"self.status='See Definition';return true;\" onmouseout=\"self.status='';return true;\">Records Retention and Destruction Policy</a></td>\r\n      <td align=\"right\" valign=\"top\"><img src=\"_gfx_/icons/checked.gif\" width=\"15\" height=\"21\" /></td>\r\n      </tr>\r\n    <tr>\r\n      <td valign=\"top\">&nbsp;</td>\r\n      <td valign=\"top\"><a class=\"glossary\" href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;gid=59&amp;print=1','glossary','scrollbars=yes,width=760,height=400')\" onmouseover=\"self.status='See Definition';return true;\" onmouseout=\"self.status='';return true;\">CEO listed with  salary</a></td>\r\n      <td align=\"right\" valign=\"top\"><img src=\"_gfx_/icons/checked.gif\" width=\"15\" height=\"21\" /></td>\r\n      </tr>\r\n    <tr>\r\n      <td valign=\"top\">&nbsp;</td>\r\n      <td valign=\"top\"><a class=\"glossary\" href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;gid=61&amp;print=1','glossary','scrollbars=yes,width=760,height=400')\" onmouseover=\"self.status='See Definition';return true;\" onmouseout=\"self.status='';return true;\">Process for determining  CEO compensation</a></td>\r\n      <td align=\"right\" valign=\"top\"><img src=\"_gfx_/icons/checked.gif\" width=\"15\" height=\"21\" /></td>\r\n      </tr>\r\n    <tr>\r\n      <td valign=\"top\">&nbsp;</td>\r\n      <td valign=\"top\"><a class=\"glossary\" href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;gid=60&amp;print=1','glossary','scrollbars=yes,width=760,height=400')\" onmouseover=\"self.status='See Definition';return true;\" onmouseout=\"self.status='';return true;\">Board Listed / Board Members Not Compensated</a></td>\r\n      <td align=\"right\" valign=\"top\"><img src=\"_gfx_/icons/checked.gif\" width=\"15\" height=\"21\" /></td>\r\n      </tr>\r\n    \r\n    <tr>\r\n      <td colspan=\"2\" valign=\"top\"><strong>Is the following information easily accessible on the charity's website?</strong></td>\r\n      <td valign=\"top\">&nbsp;</td>\r\n      </tr>\r\n    <tr>\r\n      <td valign=\"top\">&nbsp;</td>\r\n      <td valign=\"top\"><a class=\"glossary\" href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;gid=66&amp;print=1','glossary','scrollbars=yes,width=760,height=400')\" onmouseover=\"self.status='See Definition';return true;\" onmouseout=\"self.status='';return true;\">Donor Privacy  Policy</a></td>\r\n      <td align=\"right\" valign=\"top\" nowrap=\"nowrap\"><img src=\"_gfx_/icons/checked.gif\" width=\"15\" height=\"21\" /></td>\r\n      </tr>\r\n    <tr>\r\n      <td width=\"20\" valign=\"top\">&nbsp;</td>\r\n      <td valign=\"top\"><a class=\"glossary\" href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;gid=63&amp;print=1','glossary','scrollbars=yes,width=760,height=400')\" onmouseover=\"self.status='See Definition';return true;\" onmouseout=\"self.status='';return true;\">Board Members Listed</a></td>\r\n      <td valign=\"top\" align=\"right\"><img src=\"_gfx_/icons/checked.gif\" width=\"15\" height=\"21\" /></td>\r\n      </tr>\r\n    \r\n    <tr>\r\n      <td valign=\"top\">&nbsp;</td>\r\n      <td valign=\"top\"><a class=\"glossary\" href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;gid=64&amp;print=1','glossary','scrollbars=yes,width=760,height=400')\" onmouseover=\"self.status='See Definition';return true;\" onmouseout=\"self.status='';return true;\">Audited Financials</a></td>\r\n      <td align=\"right\" valign=\"top\"><img src=\"_gfx_/icons/checked.gif\" width=\"15\" height=\"21\" /></td>\r\n      </tr>\r\n    <tr>\r\n      <td valign=\"top\">&nbsp;</td>\r\n      <td valign=\"top\"><a class=\"glossary\" href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;gid=65&amp;print=1','glossary','scrollbars=yes,width=760,height=400')\" onmouseover=\"self.status='See Definition';return true;\" onmouseout=\"self.status='';return true;\">Form 990</a> \r\n        \r\n        </td>\r\n      <td align=\"right\" valign=\"top\"><img src=\"_gfx_/icons/checked.gif\" width=\"15\" height=\"21\" /></td>\r\n      </tr>              \r\n    <tr>\r\n      <td class=\"bottom\" valign=\"top\">&nbsp;</td>\r\n      <td class=\"bottom\" valign=\"top\"><a class=\"glossary\" href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;gid=62&amp;print=1','glossary','scrollbars=yes,width=760,height=400')\" onmouseover=\"self.status='See Definition';return true;\" onmouseout=\"self.status='';return true;\">Key staff listed</a> </td>\r\n      <td class=\"bottom\" align=\"right\" valign=\"top\"><img src=\"_gfx_/icons/checked.gif\" width=\"15\" height=\"21\" /></td>\r\n      </tr>\r\n    \r\n    \r\n    \r\n  </table>\r\n</div>\r\n</div>\r\n          \r\n          </div>        \r\n          \r\n          <div class=\"summaryBox\">\r\n            \r\n  <h2><a href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;word=Income%20Statement&amp;print=1','glossary','scrollbars=yes,width=760,height=300')\" class=\"glossary\" onmouseover=\"self.status='See Definition of [Income Statement]';return true;\" onmouseout=\"self.status='';return true;\">Income Statement</a>&nbsp;&nbsp;&nbsp;&nbsp; (<a href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;word=FYE&amp;print=1','glossary','scrollbars=yes,width=760,height=300')\" class=\"glossary\" onmouseover=\"self.status='See Definition of [Fye]';return true;\" onmouseout=\"self.status='';return true;\">FYE</a> 12/2012)</h2>\r\n  <div class=\"rating\">\r\n    <table width=\"100%\" border=\"0\" cellspacing=\"2\" cellpadding=\"0\">\r\n    <tr>\r\n        <td><strong><a href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;word=REVENUE&amp;print=1','glossary','scrollbars=yes,width=760,height=300')\" class=\"glossary\" onmouseover=\"self.status='See Definition of [Revenue]';return true;\" onmouseout=\"self.status='';return true;\">REVENUE</a></strong></td>\r\n        <td>&nbsp;</td>\r\n      </tr>\r\n        \r\n          <tr>\r\n            <td><strong>Contributions</strong></td>\r\n            <td align=\"right\">&nbsp;</td>\r\n          </tr>\r\n          <tr>\r\n            <td>&nbsp;&nbsp;&nbsp;Contributions, Gifts &amp; Grants</td>\r\n            <td align=\"right\">$4,587,877</td>\r\n          </tr>\r\n          <tr>\r\n        <td>&nbsp;&nbsp;&nbsp;Federated Campaigns</td>\r\n        <td align=\"right\">$0</td>\r\n      </tr>\r\n      <tr>\r\n        <td>&nbsp;&nbsp;&nbsp;Membership Dues</td>\r\n        <td align=\"right\">$0</td>\r\n      </tr>\r\n      <tr>\r\n        <td>&nbsp;&nbsp;&nbsp;Fundraising Events</td>\r\n        <td align=\"right\">$0</td>\r\n      </tr>\r\n      <tr>\r\n        <td>&nbsp;&nbsp;&nbsp;Related Organizations</td>\r\n        <td align=\"right\">$0</td>\r\n      </tr>\r\n      <tr>\r\n        <td>&nbsp;&nbsp;&nbsp;Government Grants</td>\r\n        <td align=\"right\">$0</td>\r\n      </tr>\r\n       \r\n      <tr>\r\n        <td><strong>Total Contributions</strong></td>\r\n        <td align=\"right\">$4,587,877</td>\r\n      </tr>\r\n      <tr>\r\n        <td>&nbsp;&nbsp;&nbsp;Program Service Revenue</td>\r\n        <td align=\"right\">$0</td>\r\n      </tr>\r\n\t \r\n\r\n\t \r\n      <tr>\r\n        <td><strong><a class=\"glossary\" href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;gid=10&amp;print=1','glossary','scrollbars=yes,width=760,height=400')\" onmouseover=\"self.status='See Definition';return true;\" onmouseout=\"self.status='';return true;\">Total Primary Revenue</a></strong></td>\r\n        <td align=\"right\">$4,587,877</td>\r\n      </tr>\r\n      <tr>\r\n        <td>&nbsp;&nbsp;&nbsp;<a href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;word=Other%20Revenue&amp;print=1','glossary','scrollbars=yes,width=760,height=300')\" class=\"glossary\" onmouseover=\"self.status='See Definition of [Other Revenue]';return true;\" onmouseout=\"self.status='';return true;\">Other Revenue</a></td>\r\n        <td align=\"right\">$394,931</td>\r\n      </tr>\r\n      <tr>\r\n        <td><strong>TOTAL REVENUE</strong></td>\r\n        <td align=\"right\"><strong>$4,982,808</strong></td>\r\n      </tr>\r\n\r\n      <tr>\r\n        <td>&nbsp;</td>\r\n        <td>&nbsp;</td>\r\n      </tr>\r\n      <tr>\r\n        <td><strong><a href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;word=EXPENSES&amp;print=1','glossary','scrollbars=yes,width=760,height=300')\" class=\"glossary\" onmouseover=\"self.status='See Definition of [Expenses]';return true;\" onmouseout=\"self.status='';return true;\">EXPENSES</a> </strong></td>\r\n        <td>&nbsp;</td>\r\n      </tr>\r\n      <tr>\r\n        <td>&nbsp;&nbsp;&nbsp;<a href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;word=Program%20Expenses&amp;print=1','glossary','scrollbars=yes,width=760,height=300')\" class=\"glossary\" onmouseover=\"self.status='See Definition of [Program Expenses]';return true;\" onmouseout=\"self.status='';return true;\">Program Expenses</a></td>\r\n        <td align=\"right\">$3,840,508</td>\r\n      </tr>\r\n      <tr>\r\n        <td>&nbsp;&nbsp;&nbsp;<a href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;word=Administrative%20Expenses&amp;print=1','glossary','scrollbars=yes,width=760,height=300')\" class=\"glossary\" onmouseover=\"self.status='See Definition of [Administrative Expenses]';return true;\" onmouseout=\"self.status='';return true;\">Administrative Expenses</a></td>\r\n        <td align=\"right\">$250,274</td>\r\n      </tr>\r\n      <tr>\r\n        <td>&nbsp;&nbsp;&nbsp;<a href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;word=Fundraising%20Expenses&amp;print=1','glossary','scrollbars=yes,width=760,height=300')\" class=\"glossary\" onmouseover=\"self.status='See Definition of [Fundraising Expenses]';return true;\" onmouseout=\"self.status='';return true;\">Fundraising Expenses</a></td>\r\n        <td align=\"right\">$48,209</td>\r\n      </tr>\r\n      <tr>\r\n        <td><strong><a href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;word=TOTAL%20FUNCTIONAL%20EXPENSES&amp;print=1','glossary','scrollbars=yes,width=760,height=300')\" class=\"glossary\" onmouseover=\"self.status='See Definition of [Total Functional Expenses]';return true;\" onmouseout=\"self.status='';return true;\">TOTAL FUNCTIONAL EXPENSES</a></strong></td>\r\n        <td align=\"right\"><strong>$4,138,991</strong></td>\r\n      </tr>\r\n      <tr>\r\n        <td>&nbsp;</td>\r\n        <td>&nbsp;</td>\r\n      </tr>\r\n      <tr>\r\n        <td><a href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;word=Payments%20to%20Affiliates&amp;print=1','glossary','scrollbars=yes,width=760,height=300')\" class=\"glossary\" onmouseover=\"self.status='See Definition of [Payments to Affiliates]';return true;\" onmouseout=\"self.status='';return true;\">Payments to Affiliates</a></td>\r\n        <td align=\"right\">$0</td>\r\n      </tr>\r\n      <tr>\r\n        <td><a href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;word=Excess%20%28or%20Deficit%29&amp;print=1','glossary','scrollbars=yes,width=760,height=300')\" class=\"glossary\" onmouseover=\"self.status='See Definition of [Excess (or Deficit)]';return true;\" onmouseout=\"self.status='';return true;\">Excess (or Deficit)</a> for the year </td>\r\n        <td align=\"right\">$843,817</td>\r\n      </tr>\r\n      <tr>\r\n        <td>&nbsp;</td>\r\n        <td>&nbsp;</td>\r\n      </tr>\r\n      <tr>\r\n        <td><a href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;word=Net%20Assets&amp;print=1','glossary','scrollbars=yes,width=760,height=300')\" class=\"glossary\" onmouseover=\"self.status='See Definition of [Net Assets]';return true;\" onmouseout=\"self.status='';return true;\">Net Assets</a></td>\r\n        <td align=\"right\">$16,619,985</td>\r\n      </tr>\r\n    </table>\r\n  </div>\r\n  \r\n\r\n          </div>\r\n\t\r\n          <div class=\"summaryBox\">\r\n            <h2>Charts </h2>\r\n              \r\n\r\n    <div id=\"chart_revenue\" style=\"width: 550px; height: 300px;\"></div>\r\n  \r\n\r\n\r\n    <div id=\"chart_efficiency\" style=\"width: 550px; height: 300px;\"></div>\r\n  \r\n \r\n    <div id=\"chart_capacity\" style=\"width: 550px; height: 400px;\"></div>\r\n\r\n\r\n\r\n          </div>\r\n\t\r\n\t\t<div  class=\"summaryBox\">\r\n            <h2>Compensation of Leaders&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;word=FYE&amp;print=1','glossary','scrollbars=yes,width=760,height=300')\" class=\"glossary\" onmouseover=\"self.status='See Definition of [Fye]';return true;\" onmouseout=\"self.status='';return true;\">FYE</a> 12/2012) </h2>\r\n            <table class=\"summaryPage\" width=\"100%\" border=\"0\" cellspacing=\"2\" cellpadding=\"0\">\r\n              <tr>\r\n                <th class=\"leftalign\" scope=\"col\"><span class=\"rightalign\"><a href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;word=Compensation&amp;print=1','glossary','scrollbars=yes,width=760,height=300')\" class=\"glossary\" onmouseover=\"self.status='See Definition of [Compensation]';return true;\" onmouseout=\"self.status='';return true;\">Compensation</a></span></th>\r\n                <th class=\"leftalign\" scope=\"col\"><span class=\"rightalign\"><a href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm/bay/glossary.word/word/Leadership%20Compensation%20and%20Other%20Salaries%20of%20Note%20as%20a%20Percentage%20of%20Total%20Expenses/print/1.htm','glossary','scrollbars=yes,width=625,height=300')\" class=\"glossary\" onmouseover=\"self.status='See Definition of [% of Expenses]';return true;\" onmouseout=\"self.status='';return true;\">% of Expenses</a></span></th>\r\n                <th class=\"leftalign\" scope=\"col\">Paid to</th>\r\n                <th class=\"leftalign\" scope=\"col\">Title</th>\r\n                <th class=\"rightalign\" scope=\"col\"></th>\r\n              </tr>\r\n              <tr>\r\n                <td nowrap=\"nowrap\"><span class=\"rightalign\">\r\n                  \r\n                    $87,950 \r\n                </span></td>\r\n                <td nowrap=\"nowrap\"><span class=\"rightalign\">\r\n                    2.12% \r\n                </span></td>\r\n                <td nowrap=\"nowrap\">Douglas Clements</td>\r\n                <td>President</td>\r\n\t\t\t\t\r\n                <td class=\"rightalign\"></td>\r\n              </tr>\r\n              \t\t  \r\n            </table>\r\n          </div>\r\n\r\n\t         \r\n\t\t  <div class=\"summaryBox\"> \r\n            <h2><a href=\"javascript:openBrWindow('http://www.charitynavigator.org/index.cfm?bay=glossary.word&amp;word=Mission&amp;print=1','glossary','scrollbars=yes,width=760,height=300')\" class=\"glossary\" onmouseover=\"self.status='See Definition of [Mission]';return true;\" onmouseout=\"self.status='';return true;\">Mission</a></h2>\r\n            <p>Founded in 1962, Wings of Hope is a non-sectarian, non-racial, non-political international organization that specializes in implementing poverty reduction strategies for a defined region. This is accomplished by establishing a base of operations and partnering with the poor being served. The services at each base are customized depending on the needs of the region. The common denominator is always health care and a transportation system, typically a small bush airplane. The tears of a mother in the remote jungle are the same as a mother's tears in the asphalt jungle of an American city. They need a way to access whatever health care is available and the guidance to advance those capabilities. The goal is to change the course of humanity towards peace and hope.</p>\r\n          </div>\r\n        \r\n         \r\n<div class=\"summaryBox\">\r\n              <h2>Charities Performing Similar Types of Work</h2>\r\n \r\n<h3>Highly Rated</h3>\t\t \r\n<div> \r\n\t\t\t<table class=\"summaryPage\" width=\"100%\" border=\"0\" cellspacing=\"2\" cellpadding=\"0\">\r\n              <tr>\r\n                <th width=\"60%\" class=\"leftalign\" scope=\"col\">Charity\r\n                  Name </th>\r\n                <th scope=\"col\">Overall Score </th>\r\n                <th scope=\"col\">Overall Rating </th>\r\n              </tr>\r\n             \r\n              <tr>\r\n                <td>Wings of Hope - MO </td>\r\n                <td align=\"center\">99.48</td>\r\n                <td align=\"center\"><img src=\"http://www.charitynavigator.org/_gfx_/icons/stars/4starsb.png\" width=\"31\" height=\"8\" alt=\"4 stars\" title=\"4 stars\" /></td>\r\n              </tr>\r\n\t\t\t <tr>\r\n                <td><a href=\"index.cfm?bay=search.summary&amp;orgid=12760\">WaterAid America</a> - NY</td>\r\n                <td align=\"center\">95.19</td>\r\n                <td align=\"center\"><img src=\"http://www.charitynavigator.org/_gfx_/icons/stars/4starsb.png\" width=\"31\" height=\"8\" alt=\"4 stars\" title=\"4 stars\" /></td>\r\n              </tr><tr>\r\n                <td><a href=\"index.cfm?bay=search.summary&amp;orgid=8071\">Himalayan Cataract Project</a> - VT</td>\r\n                <td align=\"center\">96.16</td>\r\n                <td align=\"center\"><img src=\"http://www.charitynavigator.org/_gfx_/icons/stars/4starsb.png\" width=\"31\" height=\"8\" alt=\"4 stars\" title=\"4 stars\" /></td>\r\n              </tr><tr>\r\n                <td><a href=\"index.cfm?bay=search.summary&amp;orgid=10431\">Curamericas Global</a> - NC</td>\r\n                <td align=\"center\">88.27</td>\r\n                <td align=\"center\"><img src=\"http://www.charitynavigator.org/_gfx_/icons/stars/3starsb.png\" width=\"31\" height=\"8\" alt=\"3 stars\" title=\"3 stars\" /></td>\r\n              </tr><tr>\r\n                <td><a href=\"index.cfm?bay=search.summary&amp;orgid=5207\">East Meets West </a> - CA</td>\r\n                <td align=\"center\">94.95</td>\r\n                <td align=\"center\"><img src=\"http://www.charitynavigator.org/_gfx_/icons/stars/4starsb.png\" width=\"31\" height=\"8\" alt=\"4 stars\" title=\"4 stars\" /></td>\r\n              </tr> \r\n     </table>\r\n\t \r\n\t<form id=\"ratedForm\" name=\"ratedForm\" method=\"post\" action=\"index.cfm\">\r\n\t<p align=\"center\"><a href=\"JavaScript: if(confirm('You must be a registered user (FREE) and logged in to use this feature.\\n\\rPress OK in order to be sent to our login and registration page.')){location.href='http://www.charitynavigator.org/index.cfm?bay=my.login&returnurl=http%3A%2F%2Fwww%2Echaritynavigator%2Eorg%2Findex%2Ecfm%3Fbay%3Dsearch%2Esummary%2526orgid%3D9524';}\" >Compare These Charities (Highly Rated)</a></p>\r\n\t\t\t\t\t<input name=\"bay\" type=\"hidden\" id=\"bay\" value=\"search.compare\" />\r\n\t\t\t\t\t<input name=\"compare\" type=\"hidden\" id=\"compare\" value=\"9524,12760,8071,10431,5207\" /></form>\r\n\t</div>\r\n<h3>Most Viewed</h3>\r\n<div> \r\n\t\t\t<table class=\"summaryPage\" width=\"100%\" border=\"0\" cellspacing=\"2\" cellpadding=\"0\">\r\n              <tr>\r\n                <th width=\"60%\" class=\"leftalign\" scope=\"col\">Charity\r\n                  Name </th>\r\n                <th scope=\"col\">Overall Score </th>\r\n                <th scope=\"col\">Overall Rating </th>\r\n              </tr>\r\n             \r\n              <tr>\r\n                <td>Wings of Hope - MO </td>\r\n                <td align=\"center\">99.48</td>\r\n                <td align=\"center\"><img src=\"http://www.charitynavigator.org/_gfx_/icons/stars/4starsb.png\" width=\"31\" height=\"8\" alt=\"4 stars\" title=\"4 stars\" /></td>\r\n              </tr>\r\n\t\t\t <tr>\r\n                <td><a href=\"index.cfm?bay=search.summary&amp;orgid=3898\">International Rescue Committee</a> - NY</td>\r\n                <td align=\"center\">95.35</td>\r\n                <td align=\"center\"><img src=\"http://www.charitynavigator.org/_gfx_/icons/stars/4starsb.png\" width=\"31\" height=\"8\" alt=\"4 stars\" title=\"4 stars\" /></td>\r\n              </tr><tr>\r\n                <td><a href=\"index.cfm?bay=search.summary&amp;orgid=5934\">Catholic Relief Services</a> - MD</td>\r\n                <td align=\"center\">81.72</td>\r\n                <td align=\"center\"><img src=\"http://www.charitynavigator.org/_gfx_/icons/stars/3starsb.png\" width=\"31\" height=\"8\" alt=\"3 stars\" title=\"3 stars\" /></td>\r\n              </tr><tr>\r\n                <td><a href=\"index.cfm?bay=search.summary&amp;orgid=4884\">Partners In Health</a> - MA</td>\r\n                <td align=\"center\">90.60</td>\r\n                <td align=\"center\"><img src=\"http://www.charitynavigator.org/_gfx_/icons/stars/4starsb.png\" width=\"31\" height=\"8\" alt=\"4 stars\" title=\"4 stars\" /></td>\r\n              </tr><tr>\r\n                <td><a href=\"index.cfm?bay=search.summary&amp;orgid=3212\">Action Against Hunger | ACF-USA</a> - NY</td>\r\n                <td align=\"center\">96.51</td>\r\n                <td align=\"center\"><img src=\"http://www.charitynavigator.org/_gfx_/icons/stars/4starsb.png\" width=\"31\" height=\"8\" alt=\"4 stars\" title=\"4 stars\" /></td>\r\n              </tr> \r\n     </table>\r\n\t \r\n<form id=\"viewedForm\" name=\"viewedForm\" method=\"post\" action=\"index.cfm\">\r\n<p align=\"center\"><a href=\"JavaScript: if(confirm('You must be a registered user (FREE) and logged in to use this feature.\\n\\rPress OK in order to be sent to our login and registration page.')){location.href='http://www.charitynavigator.org/index.cfm?bay=my.login&returnurl=http%3A%2F%2Fwww%2Echaritynavigator%2Eorg%2Findex%2Ecfm%3Fbay%3Dsearch%2Esummary%2526orgid%3D9524';}\" >Compare These Charities (Most Viewed)</a></p>\r\n                <input name=\"bay\" type=\"hidden\" id=\"bay\" value=\"search.compare\" />\r\n                <input name=\"compare\" type=\"hidden\" id=\"compare\" value=\"9524,3898,5934,4884,3212\" />\r\n</form> </div>\t\r\n\r\n  </div>\r\n  \r\n  \r\n\r\n\r\n               <div class=\"summaryBox\"><h1>Charity Login</h1>\r\n              <p>This charity has an official representative registered with Charity Navigator.</p> \r\n              </div> \r\n                    \r\n        \r\n      </div>\r\n    </div>\r\n \r\n  \t\r\n\r\n  </div>\r\n</div>\r\n\r\n\r\n    <div id=\"margin_ad\">\r\n    <div align=\"right\">\r\n    \r\n<div id='div-gpt-ad-1364025014670-3' style='width:160px; height:600px;'>\r\n  <script type='text/javascript'>\r\ngoogletag.cmd.push(function() { googletag.display('div-gpt-ad-1364025014670-3'); });\r\n</script>\r\n</div>\r\n\r\n</div>\r\n\t\r\n    </div> \r\n\r\n</div>\r\n\r\n\r\n\r\n</div>\r\n<div id=\"footer\">\r\n\t<table align=\"center\" border=\"0\" cellpadding=\"10\" width=\"930\">\r\n\t\t<tbody>\r\n\t\t\t<tr>\r\n\t\t\t\t<td scope=\"row\" valign=\"top\" width=\"25%\">\r\n\t\t\t\t\t<div class=\"footerlist\">\r\n\t\t\t\t\t\t<h2>\r\n\t\t\t\t\t\t\t<a href=\"index.cfm?bay=content.view&amp;cpid=628\">About Us</a></h2>\r\n\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<a href=\"index.cfm?bay=content.view&amp;cpid=17\">Mission</a></li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<a href=\"index.cfm?bay=content.view&amp;cpid=1193\">Where We are Headed</a></li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<a href=\"index.cfm?bay=content.view&amp;cpid=1535\">History&nbsp;</a></li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<a href=\"index.cfm?bay=content.view&amp;cpid=19\">Board and Staff</a></li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<a href=\"index.cfm?bay=content.view&amp;cpid=156\">Join Our Team</a></li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<a href=\"index.cfm?bay=content.view&amp;cpid=1783\">Charity Navigator Internship Program</a></li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<a href=\"http://www.charitynavigator.org/index.cfm?bay=content.view&amp;cpid=1602\">Spotlight on Charity Navigator&#39;s Founders</a></li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<a href=\"index.cfm?bay=content.view&amp;cpid=957\">Advisory Panel</a></li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<a href=\"index.cfm?bay=content.view&amp;cpid=1342\">Financial Measures Task Force</a></li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<a href=\"index.cfm?bay=content.view&amp;cpid=466\">Press Room</a></li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<a href=\"index.cfm?bay=content.view&amp;cpid=476\">Endorsements</a></li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<a href=\"index.cfm?bay=content.view&amp;cpid=931\">Financials</a></li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<a href=\"index.cfm?bay=content.view&amp;cpid=1607\">Policies</a></li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<a href=\"index.cfm?bay=content.view&amp;cpid=1113\">Effectiveness &amp; Results</a></li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<a href=\"http://www.charitynavigator.org/index.cfm?bay=content.view&amp;cpid=1793\">President&#39;s Reports</a></li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<a href=\"http://www.charitynavigator.org/index.cfm?bay=content.view&amp;cpid=1771\">Annual Report</a></li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</td>\r\n\t\t\t\t<td valign=\"top\" width=\"25%\">\r\n\t\t\t\t\t<div class=\"footerlist\">\r\n\t\t\t\t\t\t<h2>\r\n\t\t\t\t\t\t\t<a href=\"index.cfm?bay=content.support\">Support Charity Navigator</a></h2>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"footerlist\">\r\n\t\t\t\t\t\t<h2>\r\n\t\t\t\t\t\t\tUsing this Site</h2>\r\n\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<a href=\"index.cfm?bay=content.view&amp;cpid=37\">Terms of Use</a></li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<a href=\"http://www.charitynavigator.org/index.cfm?bay=content.view&amp;cpid=1722\">Privacy Policy</a></li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<a href=\"index.cfm?bay=content.view&amp;cpid=36\">Copyright Notice</a></li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<a href=\"index.cfm?bay=content.view&amp;cpid=479\">Site Map</a></li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"footerlist\">\r\n\t\t\t\t\t\t<h2>\r\n\t\t\t\t\t\t\tStudies</h2>\r\n\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<a href=\"index.cfm?bay=studies.ceo\">2014 CEO Compensation Study</a></li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<a href=\"index.cfm?bay=studies.metro.main\">2014 Metro Market Study</a></li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</td>\r\n\t\t\t\t<td valign=\"top\" width=\"25%\">\r\n\t\t\t\t\t<div class=\"footerlist\">\r\n\t\t\t\t\t\t<h2>\r\n\t\t\t\t\t\t\t<a href=\"index.cfm?bay=content.articles\">Articles</a></h2>\r\n\t\t\t\t\t\t<h2>\r\n\t\t\t\t\t\t\tLinking To Us</h2>\r\n\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<a class=\"active\" href=\"index.cfm?bay=content.view&amp;cpid=137\">How to Link to Us</a></li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<a href=\"index.cfm?bay=content.view&amp;cpid=932\">Search Widget</a></li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<a href=\"index.cfm?bay=content.view&amp;cpid=475\">Syndicated Content</a></li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"footerlist\">\r\n\t\t\t\t\t\t<h2>\r\n\t\t\t\t\t\t\tProducts</h2>\r\n\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<a href=\"http://www.charitynavigator.org/index.cfm?bay=content.view&amp;cpid=1739\">Hosted Solutions</a></li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<a href=\"index.cfm?bay=content.view&amp;cpid=1397\">Charity Navigator API</a></li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<a href=\"index.cfm?bay=content.view&amp;cpid=1210\">Related Books</a></li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<a href=\"index.cfm?bay=content.view&amp;cpid=336\">Ratings in Print</a></li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<a href=\"index.cfm?bay=content.view&amp;cpid=202\">Customized Charity Lists</a></li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</td>\r\n\t\t\t\t<td valign=\"top\" width=\"25%\">\r\n\t\t\t\t\t<div class=\"footerlist\">\r\n\t\t\t\t\t\t<h2>\r\n\t\t\t\t\t\t\t<a href=\"http://help.charitynavigator.org/kb\">FAQs</a></h2>\r\n\t\t\t\t\t\t<h2>\r\n\t\t\t\t\t\t\t<a href=\"index.cfm?bay=content.view&amp;cpid=459\">Contact Us</a></h2>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"footerlist\">\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\tCharity Navigator<br />\r\n\t\t\t\t\t\t\t139 Harristown Rd Suite 101<br />\r\n\t\t\t\t\t\t\tGlen Rock, NJ 07452<br />\r\n\t\t\t\t\t\t\tP: 201.818.1288<br />\r\n\t\t\t\t\t\t\tF: 201.818.4694</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr>\r\n\t\t\t\t<td colspan=\"4\" scope=\"row\" valign=\"top\">\r\n\t\t\t\t\t\r\n<!-- Follow buttons BEGIN -->\t\r\n\r\n<h2>Join Our Online Community</h2>\r\n<div style=\"text-align:center; margin:auto;\">\r\n<a href=\"http://www.facebook.com/charitynavigator\" target=\"_blank\"><img alt=\"Follow us on Facebook\" border=\"0\" height=\"29\" src=\"/_gfx_/promo/Facebook_w75px_GIF.gif\" width=\"75\" /></a>\r\n<a href=\"http://twitter.com/CharityNav\" target=\"_blank\"><img alt=\"Follow us on Twitter\" border=\"0\" height=\"29\" src=\"/_gfx_/promo/Twitter_w75px_GIF.gif\" width=\"75\" /></a>\r\n<a href=\"http://www.youtube.com/charitynavigator\" target=\"_blank\"> <img alt=\"Follow us on YouTube\" border=\"0\" height=\"29\" src=\"/_gfx_/promo/YouTube_w75px_GIF.gif\" width=\"75\" /></a>\r\n<a href=\"http://pinterest.com/charitynav/\" target=\"_blank\"><img src=\"/_gfx_/promo/pinterest-button.jpg\" alt=\"Follow us on Pinterest\" width=\"79\" height=\"29\" border=\"0\"  /></a>\r\n<a href=\"http://plus.google.com/+CharityNavigator/posts\" target=\"_blank\"><img src=\"/_gfx_/promo/googleplus_button.jpg\" alt=\"Follow us on Google+\"  width=\"79\" height=\"29\" border=\"0\" /></a>\r\n<a href=\"http://vimeo.com/charitynavigator\" target=\"_blank\"><img src=\"/_gfx_/promo/vimeo_button.jpg\" alt=\"Follow us on Vimeo\" width=\"79\" height=\"29\" border=\"0\" /></a>\r\n<a href=\"http://www.linkedin.com/company/charity-navigator\" target=\"_blank\"><img src=\"/_gfx_/promo/linkedin_button.jpg\" alt=\"Follow us on LinkedIn\" width=\"79\" height=\"29\" border=\"0\" />\r\n</a>\r\n</div>\r\n<!-- Follow buttons END -->\r\n</td>\r\n\t\t\t</tr>\r\n\t\t</tbody>\r\n\t</table>\r\n</div>\r\n\r\n\r\n</div>\r\n<div id=\"footer_final\">Copyright &copy;2014 Charity Navigator.  All rights reserved.</div>\r\n\r\n<div id=\"footerads\">\r\n  <table width=\"107\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"center\">\r\n    <tr>\r\n      <td colspan=\"3\" align=\"center\">&nbsp;</td>\r\n      <td colspan=\"5\" align=\"center\">&nbsp;</td>\r\n      </tr>\r\n    <tr>\r\n      <td><strong>AWARDS</strong></td>\r\n      <td><img src=\"http://www.charitynavigator.org/_gfx_/promo/TIME_Coolest_Websites_Logo3.gif\" alt=\"TIME\" width=\"59\" height=\"100\" /></td>\r\n      <td><img src=\"http://www.charitynavigator.org/_gfx_/promo/forbes2.gif\" alt=\"Forbes\" width=\"80\" height=\"72\" border=\"0\" class=\"top\" /></td>\r\n      <td><strong>STRATEGIC PARTNERS</strong></td>\r\n      <td>&nbsp;</td>\r\n      <td><a href=\"http://www.inetu.net\" target=\"_blank\"><img title=\"Managed Cloud Hosting from INetU\" src=\"http://www.charitynavigator.org/_gfx_/partners/Managed-Cloud-Hosting-INetU.png\" width=\"107\" height=\"35\" alt=\"Managed Cloud Hosting from INetU\" /></a></td>\r\n      <td><a href=\"http://www.donorperfect.com/?id=2247\" target=\"_blank\"><img src=\"http://www.charitynavigator.org/_gfx_/partners/dplogo-solo.png\" width=\"120\" height=\"28\" alt=\"Donor Perfect\" /></a></td>\r\n      <td><a href=\"http://www.3scale.net/\" target=\"_blank\"><img src=\"http://www.charitynavigator.org/_gfx_/partners/3scale.png\" width=\"126\" height=\"32\" alt=\"3Scale\" /></a></td>\r\n    </tr>\r\n    </table>\r\n  </div>\r\n\r\n\r\n</div>\r\n</div>\r\n<div>\r\n \r\n\r\n\r\n    <!-- ClickTale Bottom part -->\r\n    <div id=\"ClickTaleDiv\" style=\"display: none;\"></div>\r\n    <script type=\"text/javascript\">\r\n    if(document.location.protocol!='https:')\r\n      document.write(unescape(\"%3Cscript%20src='http://s.clicktale.net/WRc5.js'%20type='text/javascript'%3E%3C/script%3E\"));\r\n    </script>\r\n    <script type=\"text/javascript\">\r\n    if(typeof ClickTale=='function') ClickTale(1596,0.00069,\"www08\");\r\n    </script>\r\n    <!-- ClickTale end of Bottom part -->\r\n<div id=\"help\">\r\n\t<a href=\"http://help.charitynavigator.org\" id=\"help_link\">Help & Support</a>\r\n</div>\r\n\r\n<script>\r\n$( \"#help\" ).show( \"slide\", { direction: \"right\" }, 1000 );\r\n\r\n$(function() {\r\n    $( \"#help\" ).draggable({ axis: \"y\" });\r\n  });\r\n\r\n</script>\r\n\r\n</body>\r\n</html> ")
  (def parsed (Jsoup/parse cn-html))
  (def address-text (->> (find-having-text parsed "#leftnavcontent .rating strong" "Wings of Hope")
                      (ancestor-with-tag "p") text))
  (let [[_ address _ tel _ fax ein] (re-matches
                                      #"Wings of Hope (.*?)(tel: ([^a-z]*)\s)??(fax: ([^a-z]*)\s)??EIN: (.*)"
                                      address-text)]
    (prn address tel fax ein))
  )



(defn crawl-cn-org-page [{cn-html :org-cn-html :as org}]
  (let [parsed (Jsoup/parse cn-html) ;; parsing raw HTML to JSoup DOM
        title (-> parsed (select-one ".charityname") .ownText) ;; the name of the organization
        tagline (-> parsed (select-one ".tagline") .ownText)
        website_url (when-let [^Element ext-a (->> (select parsed "a") (filter #(= (own-text %) "Visit Web Site")) first)]
                      (.attr ext-a "href"))
        
        summary-boxes (select parsed ".summaryBox")
        mission-statement (-> (->> summary-boxes
                                 (filter #(when-let [a (select-one % "h2 a")] 
                                            (-> a .ownText (= "Mission"))))
                                 first)
                             (select-one "p")
                             .ownText)
        
        table-values (read-table-fields regular-fields-opts (select parsed ".summaryBox .shadedtable td a")) ;; fields that are not the income statement
        
        is-elem (->> (select parsed ".summaryBox h2 a") ;; income statement element
                  (filter #(= (own-text %) "Income Statement"))
                  first
                  (ancestor-with-tag "div"))
        is-values (read-table-fields
                     income-statement-fields-opts
                     (set (concat (select is-elem "td a") (select is-elem "td strong"))))
        
        address-text (->> (find-having-text parsed "#leftnavcontent .rating strong" "Wings of Hope")
                       (ancestor-with-tag "p") text)
        
        ret {:title title
             :tagline tagline
             :website_url website_url
             :mission-statement mission-statement
             
             :address-text address-text ;; TODO
             }
        ]
    (reduce (fn [m {:keys [field-name field-value]}] (assoc m field-name field-value))
            ret (concat table-values is-values))
    ))


;; --------------------------------
;; NLP
;; --------------------------------
(def stopwords #{"a" "about" "above" "after" "again" "against" "all" "am" "an" "and" "any" "are" "aren't" "as" "at" "be" "because" "been" "before" "being" "below" "between" "both" "but" "by" "can't" "cannot" "could" "couldn't" "did" "didn't" "do" "does" "doesn't" "doing" "don't" "down" "during" "each" "few" "for" "from" "further" "had" "hadn't" "has" "hasn't" "have" "haven't" "having" "he" "he'd" "he'll" "he's" "her" "here" "here's" "hers" "herself" "him" "himself" "his" "how" "how's" "i" "i'd" "i'll" "i'm" "i've" "if" "in" "into" "is" "isn't" "it" "it's" "its" "itself" "let's" "me" "more" "most" "mustn't" "my" "myself" "no" "nor" "not" "of" "off" "on" "once" "only" "or" "other" "ought" "our" "ours" "ourselves" "out" "over" "own" "same" "shan't" "she" "she'd" "she'll" "she's" "should" "shouldn't" "so" "some" "such" "than" "that" "that's" "the" "their" "theirs" "them" "themselves" "then" "there" "there's" "these" "they" "they'd" "they'll" "they're" "they've" "this" "those" "through" "to" "too" "under" "until" "up" "very" "was" "wasn't" "we" "we'd" "we'll" "we're" "we've" "were" "weren't" "what" "what's" "when" "when's" "where" "where's" "which" "while" "who" "who's" "whom" "why" "why's" "with" "won't" "would" "wouldn't" "you" "you'd" "you'll" "you're" "you've" "your" "yours" "yourself" "yourselves"})

